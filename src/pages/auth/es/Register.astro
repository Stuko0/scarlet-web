---
import Layout from "../../../layouts/Layout.astro";
import Header from "../../../components/globals/es/Header.astro";
import Footer from '../../../components/globals/es/Footer.astro'
import { registerUser } from "../../../services/users_services";

const handleLogin = async (event) => {
	event.preventDefault();
	const form = event.target as HTMLFormElement;
	const firstName = form.firstName.value;
	const lastName = form.lastName.value;
	const email = form.email.value;
	const password = form.password.value;
	try {
		const response = await registerUser(firstName, lastName, email, password);
		console.log("Register success:", response);
		alert("Resgistrado");
		window.location.href = "/";
	} catch (error) {
		console.error("Resgister failed:", error);
		alert("Registro fallo");
	}
};
---

<Layout title="!Scarlet Web">
    <Header />
    <div
        class="flex justify-center items-center h-full min-h-[88.8vh] p-4 bg-[url('https://temascbba.com/wp-content/uploads/2024/05/parque-nacional-tunari.jpg')] bg-no-repeat bg-cover"
    >
        <div
            class="grid md:grid-cols-2 items-center gap-y-8 bg-white max-w-7xl w-full shadow-[0_2px_10px_-3px_rgba(6,81,237,0.3)] rounded-md overflow-hidden"
        >
            <div
                class="max-md:order-1 flex flex-col justify-center sm:p-8 p-4 bg-gradient-to-r from-[#ffae57] to-[#ffbF27] w-full h-full"
            >
                <div class="max-w-md space-y-12 mx-auto">
                    <div>
                        <h4 class="text-white text-lg font-semibold font-titles">
                            Create Your Account
                        </h4>
                        <p class="text-[13px] text-white mt-2 font-body">
                            Welcome to our registration page! Get started by
                            creating your account.
                        </p>
                    </div>
                    <div>
                        <h4 class="text-white text-lg font-semibold font-titles">
                            Simple & Secure Registration
                        </h4>
                        <p class="text-[13px] text-white mt-2 font-body">
                            Our registration process is designed to be
                            straightforward and secure. We prioritize your
                            privacy and data security.
                        </p>
                    </div>
                    <div>
                        <h4 class="text-white text-lg font-semibold font-titles">
                            Terms and Conditions Agreement
                        </h4>
                        <p class="text-[13px] text-white mt-2 font-body">
                            Require users to accept the terms and conditions of
                            your service during registration.
                        </p>
                    </div>
                </div>
            </div>

            <form class="sm:p-8 p-4 w-full" id="register-form"> 
                <div class="mb-12">
                    <h3
                        class="text-[#ea580c] text-3xl font-extrabold max-md:text-center font-titles"
                    >
                        Register
                    </h3>
                </div>

                <div class="grid lg:grid-cols-2 gap-6 font-titles">
                    <div>
                        <label class="text-gray-800 text-sm mb-2 block" for="firstName"
                            >First Name</label
                        >
                        <input
                            name="firstName"
                            type="text"
                            class="bg-gray-100 w-full text-gray-800 text-sm px-4 py-3 rounded-md outline-[#ea580c]"
                            placeholder="Enter name"
                        />
                    </div>
                    <div>
                        <label class="text-gray-800 text-sm mb-2 block" for="lastName"
                            >Last Name</label
                        >
                        <input
                            name="lastName"
                            type="text"
                            class="bg-gray-100 w-full text-gray-800 text-sm px-4 py-3 rounded-md outline-[#ea580c]"
                            placeholder="Enter lastname"
                        />
                    </div>
                    <div>
                        <label class="text-gray-800 text-sm mb-2 block" for="email"
                            >Email E-mail</label
                        >
                        <input
                            name="email"
                            type="text"
                            class="bg-gray-100 w-full text-gray-800 text-sm px-4 py-3 rounded-md outline-[#ea580c]"
                            placeholder="Enter email"
                        />
                    </div>
                    <div>
                        <label class="text-gray-800 text-sm mb-2 block" for="number"
                            >Mobile No.</label
                        >
                        <input
                            name="number"
                            type="number"
                            class="bg-gray-100 w-full text-gray-800 text-sm px-4 py-3 rounded-md outline-[#ea580c]"
                            placeholder="Enter mobile number"
                        />
                    </div>
                    <div>
                        <label class="text-gray-800 text-sm mb-2 block" for="password"
                            >Password</label
                        >
                        <input
                            name="password"
                            type="password"
                            class="bg-gray-100 w-full text-gray-800 text-sm px-4 py-3 rounded-md outline-[#ea580c]"
                            placeholder="Enter password"
                        />
                    </div>
                    <div>
                        <label class="text-gray-800 text-sm mb-2 block"  for="cpassword"
                            >Confirm Password</label
                        >
                        <input
                            name="cpassword"
                            type="password"
                            class="bg-gray-100 w-full text-gray-800 text-sm px-4 py-3 rounded-md outline-[#ea580c]"
                            placeholder="Enter confirm password"
                        />
                    </div>
                </div>

                <div class="flex items-center mt-6">
                    <input
                        id="remember-me"
                        name="remember-me"
                        type="checkbox"
                        class="h-4 w-4 shrink-0 rounded"
                    />
                    <label for="remember-me" class="ml-3 block text-sm font-body">
                        I accept the <a
                            href="javascript:void(0);"
                            class="text-[#ea580c] font-semibold hover:underline ml-1 font-titles"
                            >Terms and Conditions</a
                        >
                    </label>
                </div>

                <div class="mt-6">
                    <button
                        type="submit"
                        class="py-3 px-6 text-sm tracking-wide font-semibold rounded-md text-white bg-[#ea580c] hover:bg-[#ef580c] focus:outline-none transition-all"
                    >
                        Sign up
                    </button>
                    <p class="text-gray-800 text-sm text-center mt-6 font-body">
						Already have an account? <a
							href="/auth/Login"
							class="text-[#ea580c] font-semibold hover:underline ml-1 whitespace-nowrap font-titles"
							>Log in here</a>
					</p>
                </div>
            </form>
            <script>
				document
					.getElementById("register-form")
					.addEventListener("submit", async (event) => {
						event.preventDefault();
						const form = event.target as HTMLFormElement;
                        const firstName = form.firstName.value;
                        const lastName = form.lastName.value;
						const email = form.email.value;
						const password = form.password.value;

						import("../../../services/users_services.js").then(
							({ registerUser }) => {
								registerUser(firstName,lastName, email, password)
									.then((response) => {
										window.location.href =
											"/dashboard/es/Dashboard";
									})
									.catch((error) => {
										alert("Fallo el Registro");
									});
							},
						);
					});
			</script>
        </div>
    </div>
  <Footer></Footer>
</Layout>